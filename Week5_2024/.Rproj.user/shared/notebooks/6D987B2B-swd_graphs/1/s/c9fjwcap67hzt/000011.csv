"0","library(tidyverse)"
"0","library(forcats)"
"0","library(lemon)"
"0","library(ggtext)"
"0","source(""helper_functions.R"")"
"0",""
"0","# Read the CSV file from the specified path and load it into a dataframe"
"0","df <- read_csv(file.path(""data"", ""FIG0314.csv"")) %>%"
"0","  "
"0","  # Parse the 'value' column as a number and divide by 100 to convert percentages to proportions"
"0","  mutate(value = parse_number(value) / 100) %>%"
"0","  "
"0","  # Reorder the 'category' factor levels and reverse the order for a desired display order in plots"
"0","  mutate(category = fct_rev(fct_relevel("
"0","    factor(category), # Convert 'category' column to a factor to control the order"
"0","    ""Demonstration of results"",    # Set the first level (highest priority) in the order"
"0","    ""Content expertise"",           # Followed by 'Content expertise'"
"0","    ""Local knowledge"",             # Continue setting levels in the desired order"
"0","    ""National reputation"","
"0","    ""Affordability of services"","
"0","    ""Previous work together"","
"0","    ""Colleague recommendation""     # The last level (lowest priority)"
"0","  ))) %>%"
"0","  "
"0","  # Create a new 'fill' column to assign colors based on the category"
"0","  mutate(fill = case_when("
"0","    category == ""Demonstration of results"" ~ GRAY2,          # Assign GRAY2 color for 'Demonstration of results'"
"0","    category == ""Affordability of services"" ~ GRAY2,         # Assign GRAY2 color for 'Affordability of services'"
"0","    category == ""Previous work together"" ~ GRAY2,            # Assign GRAY2 color for 'Previous work together'"
"0","    TRUE ~ GRAY8                                             # Assign GRAY8 color for all other categories"
"0","  ))"
"1","[1mRows: [22m[34m7[39m [1mColumns: [22m[34m2[39m
"
"1","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[31mchr[39m (2): category, value
"
"1","
[36mâ„¹[39m Use `spec()` to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.
"
"0","pt <- ggplot(df, aes(x = category, y = value)) +"
"0","  geom_col(aes(fill = fill), width = .8) +"
"0","  scale_x_discrete() +"
"0","  scale_y_continuous(position = ""right"", limits = c(0, .8), labels = scales::percent) +"
"0","  scale_fill_identity() +"
"0","  coord_capped_flip(top = ""both"") +"
"0","  labs("
"0","    caption = ""Data source: xyz; indluces N number of surbey respondents.\nNote that respondents were able to choose up to 3 options."","
"0","    y = ""% selecting given attribute"","
"0","    title = ""**Demonstrating effectiveness** is most important consideration <br/>when selecting a provider <br />"","
"0","    subtitle = ""In general, **what attributes are the most important** <br/>to you in selecting a service provider ? <br/> (Choose up to 3)"""
"0","  )+"
"0","  theme_minimal() +"
"0","  theme("
"0","    plot.title = element_markdown(size = 14),   # Enables Markdown parsing for the title"
"0","    plot.subtitle = element_markdown(size = 10), # Enables Markdown parsing for the subtitle"
"0","    plot.caption = element_text(size = 8)"
"0","  )"
"0",""
"0",""
"0","pt %>% "
"0","  save_and_show_plot(width = 6, height = 4, file_name = ""FIG0314.png"")"
"2","Error in `*tmp*`[[i]] : 
  attempt to select less than one element in get1index
"
